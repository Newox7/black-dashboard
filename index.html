<!doctype html>
<html lang="en">
  <head>
    <title>Dashboard</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!--  Fonts and icons  -->
      <!--     Fonts and icons     -->
<link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet">
<link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">


    <!-- Black Dashboard CSS -->
    <link href="assets/css/black-dashboard.css?v=1.0.0" rel="stylesheet" />
  </head>
  <body>
<div class="wrapper ">
  <div class="sidebar" data-color="purple" data-background-color="white">
    <!--
      Tip 1: You can change the color of the sidebar using: data-color="purple | azure | green | orange | danger"

      Tip 2: you can also add an image using data-image tag
  -->
    <div class="logo">
      Navigator
    </div>

    <div class="sidebar-wrapper">
      <ul class="nav">
        <li class="nav-item active  ">
            <a class="nav-link" href="#0">
                <i class="tim-icons icon-chart-pie-36"></i>
                <p>Dashboard</p>
            </a>
        </li>

         <!-- your sidebar here -->
      </ul>
    </div>
  </div>
  <div class="main-panel">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
      <div class="container-fluid">
        <div class="navbar-wrapper">

          <a class="navbar-brand" href="#pablo">Dashboard</a>
        </div>

        <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="navbar-toggler-icon icon-bar"></span>
          <span class="navbar-toggler-icon icon-bar"></span>
          <span class="navbar-toggler-icon icon-bar"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-end">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#pablo">
                <i class="tim-icons icon-bell-55"></i>  Notifications
              </a>
            </li>
             <!-- your navbar here -->
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="content">
      <div class="container-fluid">
         <!-- your content here -->
         <table class="table">
          <thead>
              <tr>
                  <th class="text-center">#</th>
                  <th>Företag</th>
                  <th>Land</th>
                  <th>X-dag</th>
                  <th>Utdelnings dag</th>
                  <th>Utdelning</th>
                  <th>Kurs</th>
                  <th>Procent utd.</th>
                  <th>Ägare</th>
              </tr>
          </thead>
          <tbody>
              <tr>
                  <td class="text-center">1</td>
                  <td><p id="name1"></p></td>
                  <td><p id="land1"></p></td>
                  <td><p id="xdag1"></p></td>
                  <td><p id="utddag1"></p></td>
                  <td><p id="utd1"></p></td>
                  <td><p id="kurs1"></p></td>
                  <td><p id="procent1"></p></td>
                  <td><p id="owner1"></p></td>
              </tr>
              <tr>
                  <td class="text-center">2</td>
                  <td><p id="name2"></p></td>
                  <td><p id="land2"></p></td>
                  <td><p id="xdag2"></p></td>
                  <td><p id="utddag2"></p></td>
                  <td><p id="utd2"></p></td>
                  <td><p id="kurs2"></p></td>
                  <td><p id="procent2"></p></td>
                  <td><p id="owner2"></p></td>
              </tr>
              <tr>
                  <td class="text-center">3</td>
                  <td><p id="name3"></p></td>
                  <td><p id="land3"></p></td>
                  <td><p id="xdag3"></p></td>
                  <td><p id="utddag3"></p></td>
                  <td><p id="utd3"></p></td>
                  <td><p id="kurs3"></p></td>
                  <td><p id="procent3"></p></td>
                  <td><p id="owner3"></p></td>
              </tr>
          </tbody>
      </table>
      <div class="flex-container">
        <div class="card-1" style="width: 20rem;">
          <img style = "width: 325px; height: 158px;" class="card-img-top" src="/assets/img/bearpic.png" alt="Card image cap">
          <div class="card-body">
            <h4 class="card-title">Short</h4>
            <p class="card-text" id="cardtext1"></p>
            <a href="https://www.avanza.se/borshandlade-produkter/certifikat-torg/lista.html" class="btn btn-primary">Gå till certifikat</a>
          </div>
        </div>
        <div class="card-2" style="width: 20rem;">
          <img style = "width: 325px; height: 158px;" class="card-img-top" src="/assets/img/bearpic.png" alt="Card image cap">
          <div class="card-body">
            <h4 class="card-title">Short</h4>
            <p class="card-text" id="cardtext2"></p>
            <a href="https://www.avanza.se/borshandlade-produkter/certifikat-torg/lista.html" class="btn btn-primary">Gå till certifikat</a>
          </div>
        </div>
        <div class="card-3" style="width: 20rem;">
          <img style = "width: 325px; height: 158px;" class="card-img-top" src="/assets/img/wallet.png" alt="Card image cap">
          <div class="card-body">
            <h4 class="card-title" id="wallettitle"></h4>
            <p class="card-text" id="wallettext"></p>
          </div>
        </div>
      </div>
      <div class="chart-container" style="position: relative; height: 300px; width: 900px;">
        <canvas id="lineChartExample"></canvas>
      </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container-fluid">
        <nav class="float-left">
          <ul>
              <li>
                Dashboard
              </li>
          </ul>
        </nav>
        <div class="copyright float-right">
            &copy;
            <script>
                document.write(new Date().getFullYear())
            </script>, made by Zacharias Faleberg Nilsson, April 2023
        </div>

         <!-- your footer here -->
      </div>
    </footer>
  </div>
</div>
<!--   Script list   -->
<script>
getData();

async function getData() {
  const response = await fetch('out.csv');
  const data = await response.text();
  var arr = [];

  const rows = data.split('\n').slice(1);
  rows.forEach(ele => {
    const columns = ele.split(',');
    columns.forEach(ele2 =>{
      arr.push(ele2);
    });
  });

  let x = Math.ceil(arr[6] / 2);
  let day = arr[2].split('-');
  let intday = parseInt(day[2]) - 1;
  let str1 = day[0].concat('-', day[1]);
  let str2 = str1.concat('-', intday.toString());
  let cardtext1 = 'Short ' + arr[0] + ' kl 16:00 den ' + str2 + ' för ' + x * 20 + "% av avsatt kapital.";
  document.getElementById('name1').innerHTML = arr[0];
  document.getElementById('land1').innerHTML = arr[1];
  document.getElementById('xdag1').innerHTML = arr[2];
  document.getElementById('utddag1').innerHTML = arr[3];
  document.getElementById('utd1').innerHTML = arr[4];
  document.getElementById('kurs1').innerHTML = arr[5];
  document.getElementById('procent1').innerHTML = arr[6];
  document.getElementById('owner1').innerHTML = arr[7];

  if(typeof arr[8] !== "undefined"){
    let x2 = Math.ceil(arr[14] / 2);
    let day2 = arr[10].split('-');
    let intday2 = parseInt(day2[2]) - 1;
    let str12 = day2[0].concat('-', day2[1]);
    let str22 = str12.concat('-', intday2.toString());
    let cardtext2 = 'Short'  + arr[8] + ' kl 16:00 den ' + str22 + 'för ' + x2 * 20 + "% av avsatt kapital.";
    document.getElementById('name2').innerHTML = arr[8];
    document.getElementById('land2').innerHTML = arr[9];
    document.getElementById('xdag2').innerHTML = arr[10];
    document.getElementById('utddag2').innerHTML = arr[11];
    document.getElementById('utd2').innerHTML = arr[12];
    document.getElementById('kurs2').innerHTML = arr[13];
    document.getElementById('procent2').innerHTML = arr[14];
    document.getElementById('owner2').innerHTML = arr[15];
  }

  const response2 = await fetch('wallet.txt');
  const walletData = await response2.text();
  walletData2 = parseInt(walletData);
  let walllettitle = 'Wallet: ' + walletData2;
  let wallettext = 'Start värdet av wallet: 10000' ;

  document.getElementById('cardtext1').innerHTML = cardtext1;
  document.getElementById('cardtext2').innerHTML = cardtext2;
  document.getElementById('wallettext').innerHTML = wallettext;
  document.getElementById('wallettitle').innerHTML = walllettitle + '(' + ((walllettitle / 10000) * 100) - 100 +'%)';
};
</script>

<!--   Core JS Files   -->
<script src="../assets/js/core/jquery.min.js" type="text/javascript"></script>
<script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="../assets/js/core/bootstrap.min.js" type="text/javascript"></script>
<script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<!--  Google Maps Plugin    -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
<!-- Chartist JS -->
<script src="../assets/js/plugins/chartjs.min.js"></script>
<script src="assets/js/chart.js"></script>
<!--  Notifications Plugin    -->
<script src="../assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
<script src="../assets/js/black-dashboard.js?v=1.0.0" type="text/javascript"></script></body>
</html>
